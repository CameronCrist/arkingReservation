# Deployment Guide - Private Parking Reservation System

Complete deployment guide for the Private Parking Reservation System using Hardhat framework.

## ğŸ“‹ ç›®å½•

- [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
- [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
- [æœ¬åœ°å¼€å‘](#æœ¬åœ°å¼€å‘)
- [æµ‹è¯•ç½‘éƒ¨ç½²](#æµ‹è¯•ç½‘éƒ¨ç½²)
- [ä¸»ç½‘éƒ¨ç½²](#ä¸»ç½‘éƒ¨ç½²)
- [åˆçº¦éªŒè¯](#åˆçº¦éªŒè¯)
- [éƒ¨ç½²åæ“ä½œ](#éƒ¨ç½²åæ“ä½œ)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## ğŸ”§ å‰ç½®è¦æ±‚

### å¿…éœ€å·¥å…·

- **Node.js**: v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: v8.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Git**: æœ€æ–°ç‰ˆæœ¬
- **MetaMask**: æµè§ˆå™¨é’±åŒ…æ‰©å±•

### æ£€æŸ¥ç¯å¢ƒ

```bash
node --version    # åº”æ˜¾ç¤º v18.x æˆ–æ›´é«˜
npm --version     # åº”æ˜¾ç¤º v8.x æˆ–æ›´é«˜
npx hardhat --version  # åº”æ˜¾ç¤º Hardhat ç‰ˆæœ¬
```

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <your-repository-url>
cd 
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶å¹¶å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š

```env
# éƒ¨ç½²è´¦æˆ·ç§é’¥ï¼ˆä» MetaMask å¯¼å‡ºï¼‰
PRIVATE_KEY=your_private_key_without_0x_prefix

# Sepolia æµ‹è¯•ç½‘ RPC URL
SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_API_KEY

# Etherscan API Keyï¼ˆç”¨äºåˆçº¦éªŒè¯ï¼‰
ETHERSCAN_API_KEY=YOUR_ETHERSCAN_API_KEY

# å¯ç”¨ Gas æŠ¥å‘Šï¼ˆå¯é€‰ï¼‰
REPORT_GAS=true
```

### 4. è·å–æµ‹è¯• ETH

å¯¹äº Sepolia æµ‹è¯•ç½‘ï¼Œä»ä»¥ä¸‹æ°´é¾™å¤´è·å–æµ‹è¯• ETHï¼š

- **Sepolia Faucet**: https://sepoliafaucet.com/
- **Alchemy Faucet**: https://sepoliafaucet.com/
- **Infura Faucet**: https://www.infura.io/faucet/sepolia

ç¡®ä¿æ‚¨çš„é’±åŒ…è‡³å°‘æœ‰ 0.1 ETH ç”¨äºéƒ¨ç½²ã€‚

---

## ğŸ  æœ¬åœ°å¼€å‘

### 1. ç¼–è¯‘åˆçº¦

```bash
npm run compile
```

è¾“å‡ºåº”æ˜¾ç¤ºï¼š

```
Compiled 1 Solidity file successfully
```

### 2. è¿è¡Œæµ‹è¯•

```bash
npm test
```

### 3. å¯åŠ¨æœ¬åœ°ç½‘ç»œ

åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­ï¼š

```bash
npm run node
```

è¿™å°†å¯åŠ¨æœ¬åœ° Hardhat ç½‘ç»œï¼Œç›‘å¬åœ¨ `http://127.0.0.1:8545`

### 4. éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ

åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­ï¼š

```bash
npm run deploy:local
```

### 5. è¿è¡Œæ¨¡æ‹Ÿè„šæœ¬

```bash
npx hardhat run scripts/simulate.js --network localhost
```

---

## ğŸŒ æµ‹è¯•ç½‘éƒ¨ç½²

### Sepolia æµ‹è¯•ç½‘éƒ¨ç½²

#### æ­¥éª¤ 1: å‡†å¤‡éƒ¨ç½²

ç¡®ä¿æ‚¨çš„ `.env` æ–‡ä»¶å·²æ­£ç¡®é…ç½®ï¼š

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env
```

#### æ­¥éª¤ 2: ç¼–è¯‘åˆçº¦

```bash
npm run compile
```

#### æ­¥éª¤ 3: éƒ¨ç½²åˆçº¦

```bash
npm run deploy -- --network sepolia
```

æˆ–ä½¿ç”¨è„šæœ¬ï¼š

```bash
npx hardhat run scripts/deploy.js --network sepolia
```

#### æ­¥éª¤ 4: ä¿å­˜éƒ¨ç½²ä¿¡æ¯

éƒ¨ç½²æˆåŠŸåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ä¿å­˜éƒ¨ç½²ä¿¡æ¯åˆ°ï¼š

```
deployments/sepolia-PrivateParkingReservationV2.json
```

éƒ¨ç½²ä¿¡æ¯åŒ…å«ï¼š

- åˆçº¦åœ°å€
- éƒ¨ç½²è€…åœ°å€
- éƒ¨ç½²æ—¶é—´
- äº¤æ˜“å“ˆå¸Œ
- ç½‘ç»œä¿¡æ¯

#### ç¤ºä¾‹è¾“å‡º

```
============================================================
å¼€å§‹éƒ¨ç½²æœºå¯†åœè½¦ä½é¢„è®¢åˆçº¦...
============================================================

ğŸ“‹ éƒ¨ç½²ä¿¡æ¯:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
éƒ¨ç½²è´¦æˆ·: 0x1234...5678
è´¦æˆ·ä½™é¢: 0.5 ETH
ç½‘ç»œåç§°: sepolia
Chain ID: 11155111
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸš€ æ­£åœ¨éƒ¨ç½²åˆçº¦: PrivateParkingReservationV2...
ğŸ“¦ å¼€å§‹éƒ¨ç½²äº¤æ˜“...
â³ ç­‰å¾…åˆçº¦éƒ¨ç½²ç¡®è®¤...

âœ… åˆçº¦éƒ¨ç½²æˆåŠŸï¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åˆçº¦åœ°å€: 0x78257622318fC85f2a9c909DD7aF9d0142cd90ce
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”— åŒºå—é“¾æµè§ˆå™¨é“¾æ¥:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Etherscan: https://sepolia.etherscan.io/address/0x78257622318fC85f2a9c909DD7aF9d0142cd90ce
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ” åˆçº¦éªŒè¯

### è‡ªåŠ¨éªŒè¯ï¼ˆæ¨èï¼‰

éƒ¨ç½²åï¼Œä½¿ç”¨éªŒè¯è„šæœ¬ï¼š

```bash
npx hardhat run scripts/verify.js --network sepolia
```

### æ‰‹åŠ¨éªŒè¯

```bash
npx hardhat verify --network sepolia <CONTRACT_ADDRESS>
```

### éªŒè¯æˆåŠŸæ ‡å¿—

```
âœ… åˆçº¦éªŒè¯æˆåŠŸï¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Š æŸ¥çœ‹å·²éªŒè¯çš„åˆçº¦ä»£ç :
https://sepolia.etherscan.io/address/0x78257622318fC85f2a9c909DD7aF9d0142cd90ce#code
```

---

## ğŸš€ ä¸»ç½‘éƒ¨ç½²

### âš ï¸ é‡è¦æé†’

1. **å®¡è®¡åˆçº¦**: åœ¨ä¸»ç½‘éƒ¨ç½²å‰ï¼Œå¿…é¡»è¿›è¡Œä¸“ä¸šçš„å®‰å…¨å®¡è®¡
2. **æµ‹è¯•å……åˆ†**: ç¡®ä¿åœ¨æµ‹è¯•ç½‘ä¸Šè¿›è¡Œå……åˆ†æµ‹è¯•
3. **å¤‡ä»½å¯†é’¥**: å®‰å…¨å¤‡ä»½æ‚¨çš„ç§é’¥
4. **å‡†å¤‡èµ„é‡‘**: ç¡®ä¿æœ‰è¶³å¤Ÿçš„ ETH æ”¯ä»˜ Gas è´¹ç”¨

### ä¸»ç½‘éƒ¨ç½²æ­¥éª¤

1. **æ›´æ–° `.env` é…ç½®**

```env
PRIVATE_KEY=your_mainnet_private_key
MAINNET_RPC_URL=https://mainnet.infura.io/v3/YOUR_API_KEY
ETHERSCAN_API_KEY=YOUR_ETHERSCAN_API_KEY
```

2. **æ·»åŠ ä¸»ç½‘é…ç½®åˆ° `hardhat.config.ts`**

```typescript
mainnet: {
  url: process.env.MAINNET_RPC_URL || "",
  accounts: process.env.PRIVATE_KEY ? [process.env.PRIVATE_KEY] : [],
  chainId: 1,
}
```

3. **éƒ¨ç½²åˆ°ä¸»ç½‘**

```bash
npx hardhat run scripts/deploy.js --network mainnet
```

4. **éªŒè¯åˆçº¦**

```bash
npx hardhat run scripts/verify.js --network mainnet
```

---

## ğŸ”§ éƒ¨ç½²åæ“ä½œ

### 1. æ›´æ–°å‰ç«¯é…ç½®

å°†éƒ¨ç½²çš„åˆçº¦åœ°å€æ›´æ–°åˆ°å‰ç«¯é…ç½®æ–‡ä»¶ï¼š

**public/config.js**:

```javascript
const CONFIG = {
  contractAddress: "0x78257622318fC85f2a9c909DD7aF9d0142cd90ce",
  networkId: 11155111, // Sepolia
  networkName: "sepolia"
};
```

### 2. æ›´æ–° ABI

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ä¿å­˜ ABI åˆ°ï¼š

```
deployments/PrivateParkingReservationV2-ABI.json
```

å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°å‰ç«¯ï¼š

```bash
cp deployments/PrivateParkingReservationV2-ABI.json public/contracts/
```

### 3. æµ‹è¯•åˆçº¦äº¤äº’

ä½¿ç”¨äº¤äº’è„šæœ¬æµ‹è¯•åˆçº¦åŠŸèƒ½ï¼š

```bash
npx hardhat run scripts/interact.js --network sepolia
```

### 4. è¿è¡Œå®Œæ•´æ¨¡æ‹Ÿ

```bash
npx hardhat run scripts/simulate.js --network sepolia
```

---

## ğŸ“Š å½“å‰éƒ¨ç½²ä¿¡æ¯

### Sepolia æµ‹è¯•ç½‘

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| **åˆçº¦åœ°å€** | `0x78257622318fC85f2a9c909DD7aF9d0142cd90ce` |
| **ç½‘ç»œ** | Sepolia Testnet |
| **Chain ID** | 11155111 |
| **åŒºå—æµè§ˆå™¨** | [æŸ¥çœ‹åˆçº¦](https://sepolia.etherscan.io/address/0x78257622318fC85f2a9c909DD7aF9d0142cd90ce) |
| **éªŒè¯çŠ¶æ€** | âœ… å·²éªŒè¯ |
| **éƒ¨ç½²æ—¶é—´** | 2024-XX-XX |

### åœ¨çº¿æ¼”ç¤º

- **å‰ç«¯åº”ç”¨**: https://private-parking-reservation.vercel.app/
- **GitHub ä»“åº“**: https://github.com/CameronCrist/PrivateParkingReservation

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. "Insufficient funds" é”™è¯¯

**é—®é¢˜**: è´¦æˆ·ä½™é¢ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥è´¦æˆ·ä½™é¢
npx hardhat run scripts/check-balance.js --network sepolia

# ä»æ°´é¾™å¤´è·å–æµ‹è¯• ETH
# https://sepoliafaucet.com/
```

#### 2. "Invalid API Key" é”™è¯¯

**é—®é¢˜**: Etherscan API Key æ— æ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ .env æ–‡ä»¶ä¸­çš„ API Key
cat .env | grep ETHERSCAN_API_KEY

# ä» Etherscan è·å–æ–°çš„ API Key
# https://etherscan.io/apis
```

#### 3. "Contract already verified" æ¶ˆæ¯

**é—®é¢˜**: åˆçº¦å·²ç»è¢«éªŒè¯è¿‡

**è§£å†³æ–¹æ¡ˆ**: è¿™ä¸æ˜¯é”™è¯¯ï¼Œåˆçº¦å·²æˆåŠŸéªŒè¯ã€‚

#### 4. "Nonce too high" é”™è¯¯

**é—®é¢˜**: äº¤æ˜“ nonce ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡ç½® MetaMask è´¦æˆ·
# Settings -> Advanced -> Reset Account
```

#### 5. Gas ä»·æ ¼è¿‡é«˜

**é—®é¢˜**: ç½‘ç»œæ‹¥å µå¯¼è‡´ Gas è´¹ç”¨é«˜

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åœ¨ hardhat.config.ts ä¸­è°ƒæ•´ Gas è®¾ç½®
gasPrice: "auto",
gas: "auto",

# æˆ–ç­‰å¾…ç½‘ç»œä¸é‚£ä¹ˆæ‹¥å µæ—¶éƒ¨ç½²
```

### è·å–å¸®åŠ©

å¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼š

1. æ£€æŸ¥ [Hardhat æ–‡æ¡£](https://hardhat.org/docs)
2. æŸ¥çœ‹ [GitHub Issues](https://github.com/CameronCrist/PrivateParkingReservation/issues)
3. åŠ å…¥ç¤¾åŒºè®¨è®º

---

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰

- [ ] å®‰è£…æ‰€æœ‰ä¾èµ– (`npm install`)
- [ ] é…ç½® `.env` æ–‡ä»¶
- [ ] è·å–è¶³å¤Ÿçš„æµ‹è¯• ETH
- [ ] ç¼–è¯‘åˆçº¦ (`npm run compile`)
- [ ] è¿è¡Œæµ‹è¯• (`npm test`)
- [ ] åœ¨æœ¬åœ°ç½‘ç»œæµ‹è¯•éƒ¨ç½²

### éƒ¨ç½²ä¸­

- [ ] æ‰§è¡Œéƒ¨ç½²è„šæœ¬
- [ ] ä¿å­˜åˆçº¦åœ°å€
- [ ] è®°å½•äº¤æ˜“å“ˆå¸Œ
- [ ] ç­‰å¾…è¶³å¤Ÿçš„ç¡®è®¤

### éƒ¨ç½²å

- [ ] éªŒè¯åˆçº¦ä»£ç 
- [ ] æ›´æ–°å‰ç«¯é…ç½®
- [ ] å¤åˆ¶ ABI æ–‡ä»¶
- [ ] æµ‹è¯•åˆçº¦äº¤äº’
- [ ] è¿è¡Œæ¨¡æ‹Ÿè„šæœ¬
- [ ] æ›´æ–° README æ–‡æ¡£
- [ ] æäº¤ä»£ç åˆ° Git

---

## ğŸ” å®‰å…¨å»ºè®®

1. **ç§é’¥ç®¡ç†**
   - æ°¸è¿œä¸è¦æäº¤ `.env` æ–‡ä»¶åˆ°ç‰ˆæœ¬æ§åˆ¶
   - ä½¿ç”¨ç¡¬ä»¶é’±åŒ…è¿›è¡Œä¸»ç½‘éƒ¨ç½²
   - å®šæœŸè½®æ¢ API Keys

2. **åˆçº¦å®‰å…¨**
   - è¿›è¡Œä¸“ä¸šå®‰å…¨å®¡è®¡
   - ä½¿ç”¨ Slither ç­‰å·¥å…·è¿›è¡Œé™æ€åˆ†æ
   - å®æ–½å¤šç­¾é’±åŒ…è¿›è¡Œç®¡ç†

3. **ç½‘ç»œå®‰å…¨**
   - ä½¿ç”¨å¯ä¿¡çš„ RPC æä¾›å•†
   - å¯ç”¨ API Key é™æµ
   - ç›‘æ§å¼‚å¸¸äº¤æ˜“æ´»åŠ¨

---

## ğŸ“š ç›¸å…³èµ„æº

- [Hardhat å®˜æ–¹æ–‡æ¡£](https://hardhat.org/)
- [Ethers.js æ–‡æ¡£](https://docs.ethers.org/)
- [Zama FHE æ–‡æ¡£](https://docs.zama.ai/)
- [Sepolia æµ‹è¯•ç½‘ä¿¡æ¯](https://sepolia.dev/)
- [Etherscan API æ–‡æ¡£](https://docs.etherscan.io/)

---

## ğŸ¯ åç»­æ­¥éª¤

1. **ç›‘æ§åˆçº¦**: ä½¿ç”¨ Etherscan ç›‘æ§åˆçº¦æ´»åŠ¨
2. **ä¼˜åŒ– Gas**: åˆ†æå’Œä¼˜åŒ–åˆçº¦ Gas æ¶ˆè€—
3. **æ‰©å±•åŠŸèƒ½**: æ·»åŠ æ–°åŠŸèƒ½å’Œæ”¹è¿›
4. **ç¤¾åŒºåé¦ˆ**: æ”¶é›†ç”¨æˆ·åé¦ˆå¹¶è¿­ä»£

---

**æœ€åæ›´æ–°**: 2024-XX-XX
**ç»´æŠ¤è€…**: Zama FHE Developer Team
**è®¸å¯è¯**: MIT License
